{% extends 'User/base.html' %}
{% load static %}

{% block content %}
  <main id="main">
	<section>
		<div class="container" >
			<div class="row">
	
				<div class="col-md-12" data-aos="fade-up">

					<section class="section profile">
					  <div class="row">
						<div class="col-xl-4">

							<div class="card">
								<div class="card-body profile-card pt-4 d-flex flex-column align-items-center">

									<img src="{{user.user_image.url}}" style="height:150px;width: 150px;border: thin solid black;" alt="Avatar" class="rounded-circle">
									<h4>{{user.fullname}}</h4>
									<div class="social-links mt-2">
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="red" class="bi bi-eye-fill" viewBox="0 0 16 16">
											<path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/>
											<path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
										</svg> &nbsp; 0&emsp;
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="red" class="bi bi-emoji-smile-fill" viewBox="0 0 16 16">
											<path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zM4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8z"/>
										</svg> &nbsp; 0 &emsp;
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="red" class="bi bi-emoji-frown-fill" viewBox="0 0 16 16">
											<path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm-2.715 5.933a.5.5 0 0 1-.183-.683A4.498 4.498 0 0 1 8 9.5a4.5 4.5 0 0 1 3.898 2.25.5.5 0 0 1-.866.5A3.498 3.498 0 0 0 8 10.5a3.498 3.498 0 0 0-3.032 1.75.5.5 0 0 1-.683.183zM10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8z"/>
										</svg> &nbsp; 0
									</div>
								</div>
							</div>

						</div>

						<div class="col-xl-8">

						  <div class="card">
							<div class="card-body pt-3">
							  <!-- Bordered Tabs -->
							  <ul class="nav nav-tabs nav-tabs-bordered">

								<li class="nav-item">
								  <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#profile-overview">Overview</button>
								</li>

								<li class="nav-item">
								  <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-edit">Edit Profile</button>
								</li>

								<li class="nav-item">
								  <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-change-password">Change Password</button>
								</li>

							  </ul>
							  <div class="tab-content pt-2">

								<div class="tab-pane fade show active profile-overview" id="profile-overview">
								  <div class="row">
									<div class="col-lg-3 col-md-4 label ">Tên người dùng</div>
									<div class="col-lg-9 col-md-8" >{{user.fullname}}</div>
								  </div>

								  <div class="row">
									<div class="col-lg-3 col-md-4 label">Email</div>
									<div class="col-lg-9 col-md-8" >{{user.email}}</div>
								  </div>
								  <div class="row">
										<div class="col-lg-3 col-md-4 label">Số bài viết</div>
										<div class="col-lg-9 col-md-8">{{len}} bài viết</div>
								  </div>

								</div>

								<div class="tab-pane fade profile-edit pt-3" id="profile-edit">

								  <!-- Profile Edit Form -->
								  <form action="{% url 'user_update' user.id %}" method="post" enctype="multipart/form-data">
									  {% csrf_token %}
<!--                                    <input type="hidden" name="ID_NGUOI_DUNG" value="${nguoidung.ID_NGUOI_DUNG}">-->
<!--                                    <input type="hidden" name="TEN_DANG_NHAP" value="${nguoidung.TEN_DANG_NHAP}">-->
									<div class="row mb-3">
									  <label class="col-md-4 col-lg-3 col-form-label">Profile Image</label>
									  <div class="col-md-8 col-lg-9">
										<img src="{{user.user_image.url}}" style="max-height: 150px;border: thin solid black;" alt="Profile" id="image">
										<div class="pt-2">
										  <input type="file" accept="image/*" name="user_image" id="file"
                                                 class="btn btn-primary btn-sm" title="Upload new profile image">
										  <!--<a href="#" class="btn btn-danger btn-sm" title="Remove my profile image"><i class="bi bi-trash"></i></a>-->
										</div>
									  </div>
									</div>

									<div class="row mb-3">
									  <label for="fullName" class="col-md-4 col-lg-3 col-form-label">Tên người dùng</label>
									  <div class="col-md-8 col-lg-9">
										<input name="fullname" type="text" class="form-control" id="fullName" value="{{user.fullname}}" required>
									  </div>
									</div>

									<div class="row mb-3">
									  <label for="Email" class="col-md-4 col-lg-3 col-form-label">Email</label>
									  <div class="col-md-8 col-lg-9">
										<input name="email" type="email" class="form-control" id="Email" value="{{user.email}}" required>
									  </div>
									</div>

									<div class="text-center">
									  <button type="submit" class="btn btn-primary" style="float:right">Save Changes</button>
									</div>
								  </form><!-- End Profile Edit Form -->

								</div>

								<div class="tab-pane fade pt-3" id="profile-change-password">
								  <!-- Change Password Form -->
								  <form method="post" action="{% url 'change_pass' user.id %}">
									  {% csrf_token %}
									<div class="row mb-3">
									  <label for="currentPassword" class="col-md-4 col-lg-3 col-form-label">Current Password</label>
									  <div class="col-md-8 col-lg-9">
										<input type="password"  name="cpass" class="form-control" id="currentPassword" required>
									  </div>
									</div>

									<div class="row mb-3">
									  <label for="newPassword" class="col-md-4 col-lg-3 col-form-label">New Password</label>
									  <div class="col-md-8 col-lg-9">
										<input type="password" name="newpass" class="form-control" id="newPassword" onkeyup="checkPass()" required>
									  </div>
									</div>

									<div class="row mb-3">
									  <label for="renewPassword" class="col-md-4 col-lg-3 col-form-label">Re-enter New Password</label>
									  <div class="col-md-8 col-lg-9">
										<input type="password" name="renewpass" class="form-control" id="renewPassword" onkeyup="checkPass()" required>
                                        <span id="confirmMessage" class="confirmMessage"></span>
									  </div>
									</div>

									<div class="text-center">
									  <button type="submit" class="btn btn-primary" id="btnsubmit" disabled="true" style="float:right">Change Password</button>
									</div>
								  </form><!-- End Change Password Form -->

								</div>

							  </div><!-- End Bordered Tabs -->

							</div>
						  </div>

						</div>
					  </div>
					</section>
								
				</div>
			</div>
		</div>
	</section>
    
  </main><!-- End #main -->

{% endblock %}


